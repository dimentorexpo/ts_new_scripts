var win_getLessonInfo = `
				<div style="display: flex;">
					<span style="cursor: -webkit-grab;">

						<div style="margin: 5px; width: 490px;" id="LessonInfoHeader">
                            <button class="commonbtn" title="—Å–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é" id="hideMeLessonInfo" style="width:50px; background: #228B22; height: 25px;">hide</button>
							<button class="commonbtn" id="RefreshInfo" title = "–û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø–æ–ª—è—Ö, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ —É—Ä–æ–∫—É! –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Å —Ñ–æ—Ä–º–æ–π –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ Search –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å" style="margin: 5px; width: 25px; height: 25px; padding: 0;">‚ôª</button>
							<button class="commonbtn" id="ClearInfo" title = "–û—á–∏—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø–æ–ª—è—Ö" style="width: 25px; height: 25px; padding: 0;">üßπ</button>
							<span id="platform" style="margin-left: 5px; width:50px; height:25px; text-align:center; color:bisque; margin:5px; text-shadow: 1px 2px 5px rgb(0 0 0 / 55%); user-select:none;">Platform: </span>
							<span id="platformname" style="width: 110px; height:30px;text-align: center;color: #fff; border-radius:5px;background: #627998f0; padding:5px; margin:5px; border:1px solid white; font-weight:500; box-shadow: 0px 5px 5px rgb(0 0 0 / 55%); font-size: 12px; cursor:text;"></span>
							<span id="roomfor" style="display: none; margin-left: 5px; width:50px; height:25px; text-align:center; color:bisque; margin:5px; text-shadow: 1px 2px 5px rgb(0 0 0 / 55%); user-select:none;">Room for Student ID: </span>
							<span id="forstudentid" style="display:none; width: 110px; height:30px;text-align: center;color: #fff; border-radius:5px;background: #627998f0; padding:5px; margin:5px; border:1px solid white; font-weight:500; box-shadow: 0px 5px 5px rgb(0 0 0 / 55%); font-size: 12px; cursor:pointer;" title="–ü—Ä–∏ –∫–ª–∏–∫–µ –∫–æ–ø–∏—Ä—É–µ—Ç –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ –∞–π–¥–∏ —É—á–µ–Ω–∏–∫–∞"></span>
                        </div>

						<div style="margin-left: 5px; height: 25px;">
							<span id="subjectname" style="margin-left: 5px; width:50px; height:25px; text-align:center; color:bisque; margin:5px; text-shadow: 1px 2px 5px rgb(0 0 0 / 55%); user-select:none;">Subject: </span>
							<span id="subjectnamefield" style="width: 110px; height:30px;text-align: center;color: #fff; border-radius:5px;background: #2569c3f0; padding:5px; margin:5px; border:1px solid white; font-weight:500; box-shadow: 0px 5px 5px rgb(0 0 0 / 55%); font-size: 11px; user-select:none;"></span>
							<span id="vidserverfield" style="margin-left: 5px; width:50px; height:25px; text-align:center; color:bisque; margin:5px; text-shadow: 1px 2px 5px rgb(0 0 0 / 55%); user-select:none;">Video Serv: </span>
							<span id="vidserverurl" style="width: 110px; height:30px;text-align: center;color: #fff; border-radius:5px;background: #2569c3f0; padding:5px; margin:5px; border:1px solid white; font-weight:500; box-shadow: 0px 5px 5px rgb(0 0 0 / 55%); font-size: 12px; cursor:text; user-select: all;"></span>
						</div>

						<div style="margin: 5px; width: 490px; display:flex; flex-wrap: wrap; align-items:center;">
							<span id="statusroomid" class = "lesson-field-name">Status:</span>
							<span id="statusroom" class = "lesson-field-value"></span>
							<span id="hashroomid" class = "lesson-field-name">Hash:</span>
							<span id="hashroom" class = "lesson-field-value" style="cursor:pointer;" title = "–ü—Ä–∏ –∫–ª–∏–∫–µ –∫–æ–ø–∏—Ä—É–µ—Ç –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–º–Ω–∞—Ç—É!"></span>
						<br>
							<span id="participantteacher" class = "lesson-field-name">Teacher:</span>
							<span id="partteachid" class = "lesson-field-value"></span>
							<span id="participantstudent" class = "lesson-field-name">Student:</span>
							<span id="partstudid" class = "lesson-field-value"></span>
						</div>

						<div>
						<input id="hashfield" placeholder = "Enter full hash or  just 1 word roomhash for adults platform" title = "Example: https://vimbox.skyeng.ru/kids/russian/room/xinisoborada" style="width:480px; text-align:center; margin-left:6px;">
						</div>

						<div style="display: flex; justify-content: center;">
							<button class="commonbtn" id="setstclass" style="margin: 5px; width: 70px; height: 30px;">Classwork</button>
                            <button class="commonbtn" id="setstsucc" style="margin: 5px; width: 70px; height: 30px;">Success</button>
							<button class="commonbtn" id="searchHash" style="margin: 5px; width: 70px; height: 30px;">Search</button>
						</div>

					</span>
				  </div>`;

if (localStorage.getItem('winTopLessonInfo') == null) { //additional Lesson info menu
    localStorage.setItem('winTopLessonInfo', '118');
    localStorage.setItem('winLeftLessonInfo', '407');
}

let wintLessonInfo = document.createElement('div');
document.body.append(wintLessonInfo);
wintLessonInfo.className = 'wintInitializeLessonInfo'
wintLessonInfo.style = 'display:none;  top: ' + localStorage.getItem('winTopLessonInfo') + 'px; left: ' + localStorage.getItem('winLeftLessonInfo') + 'px;';
wintLessonInfo.setAttribute('id', 'AFMS_LessonInfo');
wintLessonInfo.innerHTML = win_getLessonInfo;

// lexxon info menu

var listenerLessonInfo = function (e, a) {
    wintLessonInfo.style.left = Number(e.clientX - myX9997) + "px";
    wintLessonInfo.style.top = Number(e.clientY - myY9997) + "px";
    localStorage.setItem('winTopLessonInfo', String(Number(e.clientY - myY9997)));
    localStorage.setItem('winLeftLessonInfo', String(Number(e.clientX - myX9997)));
};
wintLessonInfo.onmousedown = function (a) {
    if (checkelementt(a)) {
        window.myX9997 = a.layerX;
        window.myY9997 = a.layerY;
        document.addEventListener('mousemove', listenerLessonInfo);
    }
}
wintLessonInfo.onmouseup = function () { document.removeEventListener('mousemove', listenerLessonInfo); }

// end lesson info menu

document.getElementById('openlesinfomenu').onclick = async function () { // –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Ä–æ–∫–µ

    if (wintLessonInfo.style.display == 'none') {
        wintLessonInfo.style.display = ''

        getlesinfojoin()

        //	Start

        document.getElementById('setstclass').onclick = function () { //–∏–∑–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–º–Ω–∞—Ç—ã –Ω–∞ classwork
            let status = 'classwork'
            let subject;
            let api;
            let vapi = '1';
            if (document.getElementById('hashfield').value.split('/') == '')
                subject = document.URL.split('/')[4] + "/" + document.URL.split('/')[5]
            else if (document.getElementById('hashfield').value.split('/') != '') {
                subject = document.getElementById('hashfield').value.split('/')[4] + '/' + document.getElementById('hashfield').value.split('/')[5];
                alert('–ö–æ–º–Ω–∞—Ç–∞ –±—ã–ª–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞. –ú–æ–∂–µ—Ç–µ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É Sear—Åh –∏ —É–≤–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–º–Ω–∞—Ç—ã')
            }
            api = findapi(subject, vapi)
            setstclasswork(api, status)
        }

        // End

        //	Start

        document.getElementById('setstsucc').onclick = function () { //–∏–∑–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–º–Ω–∞—Ç—ã –Ω–∞ success
            let status = 'success'
            let subject;
            let api;
            let vapi = '1';
            if (document.getElementById('hashfield').value.split('/') == '')
                subject = document.URL.split('/')[4] + "/" + document.URL.split('/')[5]
            else if (document.getElementById('hashfield').value.split('/') != '') {
                subject = document.getElementById('hashfield').value.split('/')[4] + '/' + document.getElementById('hashfield').value.split('/')[5];
                alert('–ö–æ–º–Ω–∞—Ç–∞ –±—ã–ª–∞ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∞. –ú–æ–∂–µ—Ç–µ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É Sear—Åh –∏ —É–≤–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–º–Ω–∞—Ç—ã')
            }
            api = findapi(subject, vapi)
            setstclasswork(api, status)
        }

        // End

        // Start

        document.getElementById('hashroom').onclick = function () { // –∫–æ–ø–∏—Ä—É–µ–ø—Ç –ø–æ –∫–ª–∏–∫—É —Å—Å—ã–ª–∫—É –Ω–∞ –∫–æ–º–Ω–∞—Ç—É –≤ skysmart –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
            if (document.getElementById('subjectnamefield').textContent != '' && document.getElementById('platformname').textContent == 'Skysmart') {
                copyToClipboardTSM('https://vimbox.skyeng.ru/kids/' + document.getElementById('subjectnamefield').textContent.toLowerCase() + '/room/' + document.getElementById('hashroom').textContent)
                alert('–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–º–Ω–∞—Ç—É —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!')
            } else if (document.getElementById('subjectnamefield').textContent != '' && document.getElementById('platformname').textContent == 'Adults') {
                copyToClipboardTSM('https://vimbox.skyeng.ru/lesson/' + document.getElementById('hashroom').textContent)
                alert('–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–º–Ω–∞—Ç—É —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!')
            }
        }

        // End

        // Start
        document.getElementById('searchHash').onclick = async function () { // —Ñ—É–Ω–∫—Ü–∏—è –∏—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–Ω–∞—Ç–µ –ø–æ –ø–æ–ª–Ω–æ–º—É —Ö–µ—à—É
            let vapi = '1';
            let api1;
            let api2;
            let hashval = document.getElementById('hashfield').value.split('/')

            let flagplatf = 0; // unknown platform, for example main page or other page (1) - skysmart, (2) - adults
            if (hashval[3] == 'kids') {
                document.getElementById('platformname').textContent = "Skysmart";
                flagplatf = 1;
                document.getElementById('roomfor').style.display = 'none'
                document.getElementById('forstudentid').style.display = 'none'
                document.getElementById('setstclass').style.display = ''
                document.getElementById('setstsucc').style.display = ''
            } else if (hashval[3] == 'lesson') {
                document.getElementById('platformname').textContent = "Adults";
                flagplatf = 2;
                document.getElementById('roomfor').style.display = ''
                document.getElementById('forstudentid').style.display = ''
                document.getElementById('setstclass').style.display = 'none'
                document.getElementById('setstsucc').style.display = 'none'
            } else {
                flagplatf = 0
                document.getElementById('platformname').textContent = "";
                document.getElementById('roomfor').style.display = 'none'
                document.getElementById('forstudentid').style.display = 'none'
                document.getElementById('setstclass').style.display = 'none'
                document.getElementById('setstsucc').style.display = 'none'
            }

            if (hashval != '' && flagplatf == 1) {
                let subject = hashval[4] + '/' + hashval[5]

                api1 = findapi(subject, vapi)
                vapi++;
                api2 = findapi(subject, vapi)
                loadinfo(api2)
                getvideoconfigkids(api1)

            } else if (hashval != '' && flagplatf == 2) {
                document.getElementById('hashroom').textContent = hashval[4];
                document.getElementById('statusroom').textContent = "No status"
                document.getElementById('subjectnamefield').textContent = "ENGLISH"

                getvideoconfadults(hash = hashval[4]);
                getusersadults(hash = hashval[4]);
                getjoinadultsinfo(hash = hashval[4]);

            } else if (hashval != '' && flagplatf == 0 && hashval.length == 1) {
                getvideoconfadults(hash = hashval[0]);
                getusersadults(hash = hashval[0]);
                getjoinadultsinfo(hash = hashval[0]);

                document.getElementById('platformname').textContent = "Adults"
                document.getElementById('hashroom').textContent = hashval[0];
                document.getElementById('statusroom').textContent = "No status"
                document.getElementById('subjectnamefield').textContent = "ENGLISH"
                document.getElementById('roomfor').style.display = ''
                document.getElementById('forstudentid').style.display = ''
            }
        }
        //end

        document.getElementById('RefreshInfo').onclick = getlesinfojoin; //—Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–Ω–∞—Ç–µ

        document.getElementById('ClearInfo').onclick = function () { // –û—á–∏—Å–∫–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
            document.getElementById('platformname').textContent = ""
            document.getElementById('roomfor').style.display = 'none'
            document.getElementById('forstudentid').style.display = 'none'
            document.getElementById('subjectnamefield').textContent = ""
            document.getElementById('vidserverurl').textContent = ""
            document.getElementById('statusroom').textContent = ""
            document.getElementById('hashroom').textContent = ""
            document.getElementById('partteachid').textContent = ""
            document.getElementById('partstudid').textContent = ""
            document.getElementById('hashfield').value = ""
            document.getElementById('setstclass').style.display = 'none'
            document.getElementById('setstsucc').style.display = 'none'
        }

        document.getElementById('hideMeLessonInfo').onclick = function () { // —Ñ—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é —Å—Ç–∞—Ç—É—Å–∞ —É—Ä–æ–∫–æ–≤
            wintLessonInfo.style.display = 'none'
        }

    } else wintLessonInfo.style.display = 'none'

}

async function getlesinfojoin() { // –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ –æ–± —É—Ä–æ–∫–µ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ø–æ–ª—è
    let vapi = '1';
    let api1;
    let api2;
    let flagplatf = 0; // unknown platform, for example main page or other page (1) - skysmart, (2) - adults
    if (location.pathname.split('/')[1] == 'kids') {
        document.getElementById('platformname').textContent = "Skysmart";
        flagplatf = 1;
        document.getElementById('roomfor').style.display = 'none'
        document.getElementById('forstudentid').style.display = 'none'
        document.getElementById('setstclass').style.display = ''
    } else if (location.pathname.split('/')[1] == 'lesson') {
        document.getElementById('platformname').textContent = "Adults";
        flagplatf = 2;
        document.getElementById('roomfor').style.display = ''
        document.getElementById('forstudentid').style.display = ''
        document.getElementById('setstclass').style.display = 'none'
    } else {
        flagplatf = 0
        document.getElementById('platformname').textContent = "";
        document.getElementById('roomfor').style.display = 'none'
        document.getElementById('forstudentid').style.display = 'none'
        document.getElementById('setstclass').style.display = 'none'
    }

    if (document.location.origin == 'https://vimbox.skyeng.ru' && flagplatf == 1) {
        let subject = document.URL.split('/')[4] + "/" + document.URL.split('/')[5]

        api1 = findapi(subject, vapi)
        vapi++;
        api2 = findapi(subject, vapi)
        loadinfo(api2)
        getvideoconfigkids(api1)

    } else if (document.location.origin == 'https://vimbox.skyeng.ru' && flagplatf == 2) {

        document.getElementById('hashroom').textContent = document.URL.split('/')[4];
        document.getElementById('statusroom').textContent = "No status"
        document.getElementById('subjectnamefield').textContent = "ENGLISH"

        getvideoconfadults(hash = document.URL.split('/')[4]);
        getusersadults(hash = document.URL.split('/')[4]);
        getjoinadultsinfo(hash = document.URL.split('/')[4]);

    }
}

async function getvideoconfadults(hash) { //—Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∏–¥–µ–æ—Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Adults
    await fetch("https://rooms-vimbox.skyeng.ru/rooms/api/v1/rooms/" + hash + "/get-video-config?vendor=janus", {
        "headers": {
            "accept": "application/json, text/plain, */*",
            "accept-language": "ru",
            "authorization": "Bearer " + token.token_global,
            "content-type": "application/json",
            "sec-fetch-dest": "empty",
            "sec-fetch-mode": "cors",
            "sec-fetch-site": "same-site"
        },
        "referrer": "https://vimbox.skyeng.ru/",
        "referrerPolicy": "strict-origin-when-cross-origin",
        "body": "{\"bannedServers\":[],\"recreateRoom\":false,\"forceServer\":null,\"rootDomain\":\"skyeng.ru\"}",
        "method": "PATCH",
        "credentials": "include"
    }).then(r => r.json()).then(r => vidconfadults = r)

    document.getElementById('vidserverurl').textContent = vidconfadults.endpoint.match(/video.*/)[0];

}

async function getusersadults(hash) { // —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –∫–æ–º–Ω–∞—Ç–∞ –Ω–∞ Adults
    await fetch("https://rooms.vimbox.skyeng.ru/rooms/api/v1/workbooks/last?roomHash=" + hash, {
        "method": "GET",
        "credentials": "include"
    }).then(r => r.json()).then(r => usersadults = r)

    console.log(usersadults)

    document.getElementById('forstudentid').textContent = usersadults.studentId;

    document.getElementById('forstudentid').onclick = function () {
        copyToClipboardTSM(document.getElementById('forstudentid').textContent)
    }
}

async function getjoinadultsinfo(hash) { // —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–π–µ –Ω–∞ Adults
    await joinroom(hash)

    document.getElementById('partteachid').textContent = joinresult.teacher.id
    document.getElementById('partteachid').title = joinresult.teacher.name + " " + joinresult.teacher.surname

    if (joinresult.students == '') {
        document.getElementById('partstudid').textContent = "New Student"
        document.getElementById('partstudid').title = "No name, because student didn't join the room"
    }
    else {
        document.getElementById('partstudid').textContent = joinresult.students[0].id
        document.getElementById('partstudid').title = joinresult.students[0].name + " " + joinresult.students[0].surname
    }


}

async function getvideoconfigkids(api1) { // —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∏–¥–µ–æ—Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –∞–Ω–≥–ª —è–∑—ã–∫–∞
    let hashroom;
    if (document.getElementById('hashfield').value == '')
        hashroom = document.URL.split('/')[6]
    else if (document.getElementById('hashfield').value != '')
        hashroom = document.getElementById('hashfield').value.split('/')[6]

    await fetch(api1 + hashroom + "/video-config", {
        "body": "{\"bannedServers\":[],\"recreateRoom\":false,\"forceServer\":null,\"rootDomain\":\"skyeng.ru\"}",
        "method": "POST",
        "credentials": "include"
    }).then(r => r.json()).then(r => vidconfresult = r)
    console.log(vidconfresult)

    if (vidconfresult != null && vidconfresult != undefined && vidconfresult.error == undefined) {
        document.getElementById('vidserverurl').textContent = vidconfresult.endpoint.match(/video.*/)[0];
    } else console.log(vidconfresult.error.code + ' ' + vidconfresult.error.message)
}

async function loadinfo(api2) { // –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ –æ –∫–æ–º–Ω–∞—Ç–µ
    let hashroom;
    let subjname;
    if (document.getElementById('hashfield').value == '') {
        hashroom = document.URL.split('/')[6]
        subjname = document.URL.split('/')[4]
    } else if (document.getElementById('hashfield').value != '') {
        hashroom = document.getElementById('hashfield').value.split('/')[6]
        subjname = document.getElementById('hashfield').value.split('/')[4]
    }


    await fetch(api2 + hashroom, {
        "body": null,
        "method": "GET",
        "credentials": "include"
    }).then(r => r.json()).then(r => joinresult = r)
    document.getElementById('statusroom').textContent = joinresult.status
    document.getElementById('hashroom').textContent = joinresult.hash

    for (let i = 0; i < joinresult.participants.length; i++) {
        if (joinresult.participants[i].role == 'teacher') {
            document.getElementById('partteachid').textContent = joinresult.participants[i].userId
            document.getElementById('partteachid').title = "–ò–º—è " + joinresult.participants[i].name + ' –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã: ' + joinresult.participants[i].startAt + ' –í—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + joinresult.participants[i].joinedAt
        } else if (joinresult.participants[i].role == 'student') {
            document.getElementById('partstudid').textContent = joinresult.participants[i].userId
            document.getElementById('partstudid').title = "–ò–º—è " + joinresult.participants[i].name + ' –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã: ' + joinresult.participants[i].startAt + ' –í—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + joinresult.participants[i].joinedAt
        }
    }

    document.getElementById('subjectnamefield').textContent = subjname.toUpperCase();

    console.log('%c–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Ä–æ–∫–µ –ø–æ–ª—É—á–µ–Ω–∞!', 'color:lightgreen; font-weight:700')
    console.log(joinresult)
}

function findapi(subject, vapi) {
    let findapiv1;
    let findapiv2;

    switch (subject) {
        case "english/room":
            findapiv1 = ("https://api-english.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-english.skyeng.ru/api/v2/rooms/")
            break;

        case "math/room":
            findapiv1 = ("https://api-math.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-math.skyeng.ru/api/v2/rooms/")
            break;

        case "computer-science/room":
            findapiv1 = ("https://api-computer-science.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-computer-science.skyeng.ru/api/v2/rooms/")
            break;

        case "geography/room":
            findapiv1 = ("https://api-geography.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-geography.skyeng.ru/api/v2/rooms/")
            break;

        case "chess/room":
            findapiv1 = ("https://api-chess.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-chess.skyeng.ru/api/v2/rooms/")
            break;

        case "social-science/room":
            findapiv1 = ("https://api-social-science.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-social-science.skyeng.ru/api/v2/rooms/")
            break;

        case "history/room":
            findapiv1 = ("https://api-history.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-history.skyeng.ru/api/v2/rooms/")
            break;

        case "biology/room":
            findapiv1 = ("https://api-biology.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-biology.skyeng.ru/api/v2/rooms/")
            break;

        case "physics/room":
            findapiv1 = ("https://api-physics.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-physics.skyeng.ru/api/v2/rooms/")
            break;

        case "literature/room":
            findapiv1 = ("https://api-literature.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-literature.skyeng.ru/api/v2/rooms/")
            break;

        case "chemistry/room":
            findapiv1 = ("https://api-chemistry.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-chemistry.skyeng.ru/api/v2/rooms/")
            break;

        case "russian/room":
            findapiv1 = ("https://api-russian.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-russian.skyeng.ru/api/v2/rooms/")
            break;

        case "preschool/room":
            findapiv1 = ("https://api-preschool.skyeng.ru/api/v1/rooms/")
            findapiv2 = ("https://api-preschool.skyeng.ru/api/v2/rooms/")
            break;
    }
    if (vapi == '1') {
        return (findapiv1)
    } else if (vapi == '2') {
        return (findapiv2)
    } else {
        console.log(vapi + '–æ—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è api');
    }
}

function setstclasswork(api, status) { // —Ñ—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω—è—é—â–∞—è —Å—Ç–∞—Ç—É—Å –∫–æ–º–Ω–∞—Ç—ã

    let hashval = document.getElementById('hashfield').value.split('/')

    if (location.origin == 'https://vimbox.skyeng.ru' && hashval == '' && location.pathname.split('/')[3] != 'teacher') {

        fetch(api + document.URL.split('/')[6], {
            "headers": {
                "accept": "application/json",
                "content-type": "application/json",
                "sec-fetch-mode": "cors",
                "sec-fetch-site": "same-site"
            },
            "body": "{\"status\":\"" + status + "\",\"name\":\"\"}",
            "method": "PATCH",
            "mode": "cors",
            "credentials": "include"
        });

        alert('–í—ã—Å—Ç–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å ' + status + ' !')
        location.reload();
    } else if (hashval != '') {

        fetch(api + hashval[6], {
            "headers": {
                "accept": "application/json",
                "content-type": "application/json",
                "sec-fetch-mode": "cors",
                "sec-fetch-site": "same-site"
            },
            "body": "{\"status\":\"" + status + "\",\"name\":\"\"}",
            "method": "PATCH",
            "mode": "cors",
            "credentials": "include"
        });

    }

}

async function joinroom(item) { //—Ñ—É–Ω–∫—Ü–∏—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É –Ω–∞ join
    await fetch("https://rooms-vimbox.skyeng.ru/rooms/api/v1/rooms/" + item + "/join", {
        "method": "PATCH",
        "credentials": "include"
    }).then(r => r.json()).then(r => joinresult = r)
    console.log(joinresult)
}